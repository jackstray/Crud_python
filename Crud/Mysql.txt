create database cadastro;
use cadastro;

CREATE TABLE ESTADO(
IDEstado INTEGER NOT NULL AUTO_INCREMENT,
Nome VARCHAR(120) NOT NULL,
PRIMARY KEY(IDEstado));

CREATE TABLE CIDADE(
IDCidade INTEGER NOT NULL AUTO_INCREMENT,
IDEstado INTEGER NOT NULL,
Nome VARCHAR(120) NOT NULL,
PRIMARY KEY(IDCidade),
FOREIGN KEY(IDEstado) REFERENCES ESTADO(IDESTADO));

CREATE TABLE ENDERECO(
IDEndereco INTEGER NOT NULL AUTO_INCREMENT,
IDCidade INTEGER NOT NULL,
Logradouro VARCHAR(20) NOT NULL,
Nome VARCHAR(120) NOT NULL,
Numero INTEGER NOT NULL,
Complemento VARCHAR(400),
PRIMARY KEY(IDEndereco),
FOREIGN KEY(IDCidade) REFERENCES CIDADE(IDCidade));

CREATE TABLE CLIENTE(
IDCliente INTEGER NOT NULL AUTO_INCREMENT,
IDEndereco INTEGER,
Nome VARCHAR(120) NOT NULL,
CPF CHAR(15) NOT NULL,
PRIMARY KEY(IDCliente),
FOREIGN KEY(IDEndereco) REFERENCES ENDERECO(IDEndereco));

CREATE TABLE EMAIL(
IDEmail INTEGER NOT NULL AUTO_INCREMENT,
IDCliente INTEGER NOT NULL,
Email VARCHAR(120),
PRIMARY KEY(IDEmail),
FOREIGN KEY(IDCliente) REFERENCES CLIENTE(IDCliente));

CREATE TABLE TELEFONE(
IDTelefone INTEGER NOT NULL AUTO_INCREMENT,
IDCliente INTEGER NOT NULL,
Telefone CHAR(19),
PRIMARY KEY(IDTelefone),
FOREIGN KEY(IDCliente) REFERENCES CLIENTE(IDCliente));

CREATE TABLE CATEGORIA(
IDCategoria INTEGER NOT NULL AUTO_INCREMENT,
Salario DECIMAL(9,2) NOT NULL,
Nome VARCHAR(120) NOT NULL,
PRIMARY KEY(IDCategoria));

CREATE TABLE FUNCIONARIO(
IDFuncionario INTEGER NOT NULL AUTO_INCREMENT,
IDCategoria INTEGER NOT NULL,
Salario DECIMAL(9,2) NOT NULL,
Meta DECIMAL(9,2),
Nome VARCHAR(120),
PRIMARY KEY(IDFuncionario),
FOREIGN KEY(IDCategoria) REFERENCES CATEGORIA(IDCategoria));

CREATE TABLE VENDA(
IDVenda INTEGER NOT NULL AUTO_INCREMENT,
IDCliente INTEGER NOT NULL,
IDFuncionario INTEGER NOT NULL,
Data DATE NOT NULL,
Delivery BOOLEAN NOT NULL,
Cancelado BOOLEAN NOT NULL,
ValorTotal DECIMAL(9,2) NOT NULL,
FormaPagamento VARCHAR(120),
PRIMARY KEY(IDVenda),
FOREIGN KEY(IDCliente) REFERENCES CLIENTE(IDCliente),
FOREIGN KEY(IDFuncionario) REFERENCES FUNCIONARIO(IDFuncionario));

CREATE TABLE NOTA_FISCAL(
IDNota INTEGER NOT NULL AUTO_INCREMENT,
IDVenda INTEGER NOT NULL,
Data DATE NOT NULL,
PRIMARY KEY(IDNota));

CREATE TABLE FOLHA_PAGAMENTO(
IDFolhaPagamento INTEGER NOT NULL AUTO_INCREMENT,
IDFuncionario INTEGER NOT NULL,
Data DATE NOT NULL,
Salario DECIMAL(9,2) NOT NULL,
PRIMARY KEY(IDFolhaPagamento),
FOREIGN KEY(IDFuncionario) REFERENCES FUNCIONARIO(IDFuncionario));

CREATE TABLE FORNECEDOR(
IDFornecedor INTEGER NOT NULL AUTO_INCREMENT,
Nome VARCHAR(120) NOT NULL,
PRIMARY KEY(IDFornecedor));

CREATE TABLE COMPRA(
IDCompra INTEGER NOT NULL AUTO_INCREMENT,
IDFornecedor INTEGER NOT NULL,
Total DECIMAL(9,2) NOT NULL,
Data DATE NOT NULL,
Parcelas INTEGER,
PRIMARY KEY(IDCompra),
FOREIGN KEY(IDFornecedor) REFERENCES FORNECEDOR(IDFornecedor));

CREATE TABLE CONTA(
IDConta INTEGER NOT NULL AUTO_INCREMENT,
IDFolhaPagamento INTEGER,
IDCompra INTEGER,
Data DATE NOT NULL,
Valor DECIMAL(9,2) NOT NULL,
DataPagamento Date,
FormaPagamento VARCHAR(120),
PRIMARY KEY(IDConta),
FOREIGN KEY(IDFolhaPagamento) REFERENCES FOLHA_PAGAMENTO(IDFolhaPagamento),
FOREIGN KEY(IDCompra) REFERENCES COMPRA(IDCompra));

CREATE TABLE ESTOQUE(
IDEstoque INTEGER NOT NULL AUTO_INCREMENT,
Minimo DECIMAL(9,2) NOT NULL,
Quantidade DECIMAL(9,2) NOT NULL,
PRIMARY KEY(IDEstoque));

CREATE TABLE PRODUTO(
IDProduto INTEGER NOT NULL AUTO_INCREMENT,
IDEstoque INTEGER NOT NULL,
IDFornecedor INTEGER NOT NULL,
Preco DECIMAL(9,2) NOT NULL,
Desconto DECIMAL(9,2) NOT NULL,
Aliquota DECIMAL(9,2) NOT NULL,
ICMS DECIMAL(9,2) NOT NULL,
Tipo VARCHAR(120) NOT NULL,
Codigo VARCHAR(20) NOT NULL,
Unidade VARCHAR(120) NOT NULL,
Descricao VARCHAR(360),
Nome VARCHAR(120) NOT NULL,
PRIMARY KEY(IDProduto),
FOREIGN KEY(IDEstoque) REFERENCES ESTOQUE(IDEstoque),
FOREIGN KEY(IDFornecedor) REFERENCES FORNECEDOR(IDFornecedor));

CREATE TABLE LISTA_COMPRA(
IDListaCompra INTEGER NOT NULL AUTO_INCREMENT,
IDProduto INTEGER NOT NULL,
IDCompra INTEGER NOT NULL,
Quantidade DECIMAL(9,3) NOT NULL,
Subtotal DECIMAL(9,2) NOT NULL,
Preco DECIMAL(9,2) NOT NULL,
PRIMARY KEY(IDListaCompra),
FOREIGN KEY(IDProduto) REFERENCES PRODUTO(IDProduto),
FOREIGN KEY(IDCompra) REFERENCES COMPRA(IDCompra));

CREATE TABLE LISTA_VENDA(
IDListaVenda INTEGER NOT NULL AUTO_INCREMENT,
IDProduto INTEGER NOT NULL,
IDVenda INTEGER NOT NULL,
Quantidade DECIMAL(9,3) NOT NULL,
Subtotal DECIMAL(9,2) NOT NULL,
Preco DECIMAL(9,2) NOT NULL,
PRIMARY KEY(IDListaVenda),
FOREIGN KEY(IDProduto) REFERENCES PRODUTO(IDProduto),
FOREIGN KEY(IDVenda) REFERENCES VENDA(IDVenda));



